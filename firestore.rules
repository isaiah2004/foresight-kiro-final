service cloud.firestore {
  match /databases/{database}/documents {
    // Users can access their own data (temporarily allowing all authenticated users)
    // TODO: Properly configure Clerk-Firebase integration for user-specific access
    match /users/{userId} {
      allow read, write: if request.auth != null;
    }
    
    // User's financial data - allowing all authenticated users temporarily
    // TODO: Restrict to specific user ID once Clerk-Firebase integration is working
    match /users/{userId}/investments/{document} {
      allow read, write: if request.auth != null;
    }
    
    match /users/{userId}/budgets/{document} {
      allow read, write: if request.auth != null;
    }
    
    match /users/{userId}/expenses/{document} {
      allow read, write: if request.auth != null;
    }
    
    match /users/{userId}/loans/{document} {
      allow read, write: if request.auth != null;
    }
    
    match /users/{userId}/income/{document} {
      allow read, write: if request.auth != null;
    }
    
    // Deny everything else by default
    match /{document=**} {
      allow read, write: if false;
    }
  }
}